# Plugforge Improvements - Apply gmweb Lessons

## Completed

- [x] Fix hook exit codes - pre-tool-use-hook.js and stop-hook.js now use exit code 2 for blocks
- [x] Hooks aligned with Claude Code documentation standard

## Remaining

### 1. GitHub Actions Sync - Delete Removed Files
- [ ] Verify git clean -fdx removes all deleted files from target repos
- [ ] Current workflow: git reset --hard && git clean -fdx before copying new files
- [ ] Issue: May not catch orphaned files if build didn't regenerate expected files
- [ ] Fix: Add rsync with --delete flag OR explicit file manifest validation

### 2. Generic Template Distribution
- [ ] Ensure generic files (README, LICENSE, .gitignore, package.json base) sync to all 9 repos
- [ ] Current: Only platform-specific adapters generate files
- [ ] Issue: Generic template files may not propagate consistently
- [ ] Fix: Create shared template layer distributed by all adapters

### 3. Build Verification
- [ ] Add validation that generated files match expected manifest
- [ ] Report orphaned files (in output but not in expected list)
- [ ] Report missing files (expected but not generated)

### 4. CLAUDE.md Documentation
- [ ] Condense verbose sections (Configuration Reference, Technical Caveats)
- [ ] Follow gmweb pattern: expand architecture, condense mundane

## Verification Commands

```bash
# Test each platform generates expected files
cd /home/user/plugforge
npm run build plugforge-starter /tmp/test-build

# Check for orphaned files
find /tmp/test-build -type f | wc -l
```

